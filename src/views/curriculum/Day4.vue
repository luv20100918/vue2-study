<template>
  <div class="lesson">
    <div class="lesson-header">
      <router-link to="/curriculum" class="back-link">â† ì»¤ë¦¬í˜ëŸ¼ìœ¼ë¡œ ëŒì•„ê°€ê¸°</router-link>
      <span class="day-badge">Day 4</span>
      <h1>ë¦¬ìŠ¤íŠ¸ ë Œë”ë§</h1>
      <p class="duration">â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„: 30ë¶„</p>
    </div>

    <div class="lesson-content">
      <section>
        <h2>ğŸ“Œ í•™ìŠµ ëª©í‘œ</h2>
        <ul>
          <li>v-forë¡œ ë°°ì—´ ë Œë”ë§í•˜ê¸°</li>
          <li>v-forë¡œ ê°ì²´ ë Œë”ë§í•˜ê¸°</li>
          <li>key ì†ì„±ì˜ ì¤‘ìš”ì„± ì´í•´</li>
          <li>ë°°ì—´ ë³€ê²½ ê°ì§€ ë°©ë²•</li>
        </ul>
      </section>

      <section>
        <h2>ğŸ“– ê°œë… ì„¤ëª…</h2>

        <h3>1. ë°°ì—´ ë Œë”ë§</h3>
        <div class="code-block">
          <pre><code class="language-javascript">&lt;ul&gt;
  &lt;li v-for="item in items" :key="item.id"&gt;
    {{ item.name }}
  &lt;/li&gt;
&lt;/ul&gt;

&lt;!-- ì¸ë±ìŠ¤ ì‚¬ìš© --&gt;
&lt;li v-for="(item, index) in items" :key="item.id"&gt;
  {{ index }}. {{ item.name }}
&lt;/li&gt;</code></pre>
        </div>

        <h3>2. ê°ì²´ ë Œë”ë§</h3>
        <div class="code-block">
          <pre><code class="language-javascript">&lt;div v-for="(value, key) in object" :key="key"&gt;
  {{ key }}: {{ value }}
&lt;/div&gt;

&lt;!-- ì¸ë±ìŠ¤ í¬í•¨ --&gt;
&lt;div v-for="(value, key, index) in object" :key="key"&gt;
  {{ index }}. {{ key }}: {{ value }}
&lt;/div&gt;</code></pre>
        </div>

        <h3>3. key ì†ì„±</h3>
        <p><code>:key</code>ëŠ” Vueê°€ ê° ë…¸ë“œë¥¼ ì¶”ì í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ í•„ìˆ˜ì…ë‹ˆë‹¤.</p>
        <div class="code-block">
          <pre><code class="language-javascript">&lt;!-- âŒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ --&gt;
&lt;li v-for="item in items"&gt;{{ item }}&lt;/li&gt;

&lt;!-- âœ… ê¶Œì¥ --&gt;
&lt;li v-for="item in items" :key="item.id"&gt;{{ item }}&lt;/li&gt;</code></pre>
        </div>
      </section>

      <section>
        <h2>ğŸ”¬ ì‹¤ìŠµ ì˜ˆì œ</h2>

        <div class="demo-box">
          <h4>í•  ì¼ ëª©ë¡</h4>
          <div class="input-group">
            <input
              v-model="newTodo"
              @keyup.enter="addTodo"
              placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
            >
            <button @click="addTodo">ì¶”ê°€</button>
          </div>

          <ul class="todo-list">
            <li v-for="(todo, index) in todos" :key="todo.id">
              <span :class="{ done: todo.done }" @click="toggleTodo(index)">
                {{ index + 1 }}. {{ todo.text }}
              </span>
              <button class="delete-btn" @click="removeTodo(index)">ì‚­ì œ</button>
            </li>
          </ul>
          <p v-if="todos.length === 0" class="empty-msg">í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>

          <h4 style="margin-top: 30px;">ì‚¬ìš©ì ì •ë³´ (ê°ì²´ ë Œë”ë§)</h4>
          <table class="info-table">
            <tr v-for="(value, key) in userInfo" :key="key">
              <td>{{ key }}</td>
              <td>{{ value }}</td>
            </tr>
          </table>

          <h4 style="margin-top: 30px;">ìˆ«ì ë²”ìœ„ ë Œë”ë§</h4>
          <span v-for="n in 10" :key="n" class="number-badge">{{ n }}</span>
        </div>
      </section>

      <section>
        <h2>ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸</h2>
        <div class="tip-box">
          <p>âœ… <strong>:key</strong>ëŠ” í•­ìƒ ê³ ìœ í•œ ê°’ìœ¼ë¡œ ì§€ì • (id ê¶Œì¥, indexëŠ” ë¹„ê¶Œì¥)</p>
          <p>âœ… ë°°ì—´ ë³€ê²½ ë©”ì„œë“œ: push, pop, shift, unshift, splice, sort, reverse</p>
          <p>âœ… ë°°ì—´ êµì²´ ë©”ì„œë“œ: filter, concat, slice (ìƒˆ ë°°ì—´ ë°˜í™˜)</p>
          <p>âš ï¸ <code>arr[index] = value</code>ëŠ” ë°˜ì‘ì„±ì´ ë™ì‘í•˜ì§€ ì•ŠìŒ â†’ <code>Vue.set()</code> ë˜ëŠ” <code>splice()</code> ì‚¬ìš©</p>
        </div>
      </section>

      <section>
        <h2>ğŸ“ ì˜¤ëŠ˜ì˜ ê³¼ì œ</h2>
        <ol>
          <li>ì™„ë£Œëœ í•  ì¼ë§Œ í•„í„°ë§í•´ì„œ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ ì¶”ê°€</li>
          <li>ì „ì²´ ì‚­ì œ ë²„íŠ¼ êµ¬í˜„</li>
          <li>í•  ì¼ ê°œìˆ˜ í‘œì‹œí•˜ê¸° (ì˜ˆ: "ì´ 3ê°œì˜ í•  ì¼")</li>
        </ol>
      </section>
    </div>

    <div class="lesson-nav">
      <router-link to="/curriculum/day3" class="prev-btn">â† Day 3: ì¡°ê±´ë¶€ ë Œë”ë§</router-link>
      <router-link to="/curriculum/day5" class="next-btn">Day 5: ì´ë²¤íŠ¸ í•¸ë“¤ë§ â†’</router-link>
    </div>
  </div>
</template>

<script>
import Prism from 'prismjs'

export default {
  name: 'Day4',
  mounted() {
    Prism.highlightAll()
  },
  data() {
    return {
      newTodo: '',
      nextId: 4,
      todos: [
        { id: 1, text: 'Vue.js ê³µë¶€í•˜ê¸°', done: false },
        { id: 2, text: 'ìš´ë™í•˜ê¸°', done: true },
        { id: 3, text: 'ì±… ì½ê¸°', done: false }
      ],
      userInfo: {
        ì´ë¦„: 'í™ê¸¸ë™',
        ë‚˜ì´: 25,
        ì§ì—…: 'ê°œë°œì',
        ì·¨ë¯¸: 'ì½”ë”©'
      }
    }
  },
  methods: {
    addTodo() {
      if (this.newTodo.trim()) {
        this.todos.push({
          id: this.nextId++,
          text: this.newTodo,
          done: false
        })
        this.newTodo = ''
      }
    },
    removeTodo(index) {
      this.todos.splice(index, 1)
    },
    toggleTodo(index) {
      this.todos[index].done = !this.todos[index].done
    }
  }
}
</script>

<style scoped>
.lesson {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  text-align: left;
}

.lesson-header {
  margin-bottom: 30px;
}

.back-link {
  color: #42b983;
  text-decoration: none;
  font-size: 14px;
}

.day-badge {
  display: inline-block;
  background: #42b983;
  color: white;
  padding: 4px 12px;
  border-radius: 4px;
  font-size: 14px;
  margin: 15px 0 10px;
}

h1 {
  color: #2c3e50;
  margin: 10px 0;
}

.duration {
  color: #666;
}

section {
  margin-bottom: 30px;
}

h2 {
  color: #42b983;
  border-bottom: 1px solid #eee;
  padding-bottom: 10px;
}

h3 {
  color: #2c3e50;
  margin-top: 20px;
}

.code-block {
  margin: 15px 0;
  border-radius: 8px;
  overflow: hidden;
}

.code-block pre {
  margin: 0 !important;
  border-radius: 8px !important;
}

.code-block pre code {
  font-size: 14px !important;
  line-height: 1.5 !important;
}

.demo-box {
  background: #f9f9f9;
  border: 2px dashed #42b983;
  border-radius: 8px;
  padding: 20px;
  margin: 15px 0;
}

.input-group {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.input-group input {
  flex: 1;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.input-group button, .demo-box > button {
  background: #42b983;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
}

.todo-list {
  list-style: none;
  padding: 0;
}

.todo-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  background: white;
  margin-bottom: 5px;
  border-radius: 4px;
}

.todo-list li span {
  cursor: pointer;
}

.todo-list li span.done {
  text-decoration: line-through;
  color: #999;
}

.delete-btn {
  background: #ff6b6b !important;
  padding: 5px 10px !important;
  font-size: 12px;
}

.empty-msg {
  color: #999;
  text-align: center;
}

.info-table {
  width: 100%;
  border-collapse: collapse;
}

.info-table td {
  padding: 8px;
  border: 1px solid #ddd;
}

.info-table td:first-child {
  background: #f5f5f5;
  font-weight: bold;
  width: 100px;
}

.number-badge {
  display: inline-block;
  width: 30px;
  height: 30px;
  line-height: 30px;
  text-align: center;
  background: #42b983;
  color: white;
  border-radius: 50%;
  margin: 3px;
}

.tip-box {
  background: #e8f5e9;
  border-left: 4px solid #42b983;
  padding: 15px;
  border-radius: 0 8px 8px 0;
}

.tip-box p {
  margin: 5px 0;
}

.lesson-nav {
  display: flex;
  justify-content: space-between;
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid #eee;
}

.prev-btn, .next-btn {
  padding: 10px 20px;
  border-radius: 4px;
  text-decoration: none;
}

.prev-btn {
  background: #eee;
  color: #333;
}

.next-btn {
  background: #42b983;
  color: white;
}

p code, li code {
  background: #f5f5f5 !important;
  padding: 2px 6px !important;
  border-radius: 3px !important;
  color: #e83e8c !important;
}
</style>
